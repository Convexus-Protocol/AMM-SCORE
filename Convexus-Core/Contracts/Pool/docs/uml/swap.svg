<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="732px" preserveAspectRatio="none" style="width:671px;height:732px;background:#FFFFFF;" version="1.1" viewBox="0 0 671 732" width="671px" zoomAndPan="magnify"><defs><filter height="300%" id="fyx272bsjh6o6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="40.2969" y2="689.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="242.5" x2="242.5" y1="40.2969" y2="689.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="390" x2="390" y1="40.2969" y2="689.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="537" x2="537" y1="40.2969" y2="689.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="625" x2="625" y1="40.2969" y2="689.0781"/><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="12" y="24.9951">Callee</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="5" y="688.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="12" y="708.0732">Callee</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="184.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="191.5" y="24.9951">ConvexusPool</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="184.5" y="688.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="191.5" y="708.0732">ConvexusPool</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="354" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="361" y="24.9951">Token1</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="354" y="688.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="361" y="708.0732">Token1</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="495" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="502" y="24.9951">recipient</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="495" y="688.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="502" y="708.0732">recipient</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="589" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="596" y="24.9951">Token0</text><rect fill="#FEFECE" filter="url(#fyx272bsjh6o6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="589" y="688.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="596" y="708.0732">Token0</text><polygon fill="#A80036" points="231,158.2266,241,162.2266,231,166.2266,235,162.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="36" x2="237" y1="162.2266" y2="162.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="43" y="66.3638">swap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="85" y="66.3638">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="51" y="81.4966">recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="51" y="96.6294">true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="51" y="111.7622">amount0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="51" y="126.895">sqrtPriceLimitX96,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="51" y="142.0278">bytes(recipient)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="43" y="157.1606">)</text><polygon fill="#A80036" points="378,263.0234,388,267.0234,378,271.0234,382,267.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="243" x2="384" y1="267.0234" y2="267.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="250" y="186.2935">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="318" y="186.2935">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="258" y="201.4263">recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="258" y="216.5591">amount1, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="266" y="231.6919">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="258" y="246.8247">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="250" y="261.9575">)</text><polygon fill="#A80036" points="525,367.8203,535,371.8203,525,375.8203,529,371.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="531" y1="371.8203" y2="371.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="397" y="291.0903">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="507" y="291.0903">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="405" y="306.2231">ConvexusPool,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="405" y="321.356">amount1, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="413" y="336.4888">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="405" y="351.6216">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="397" y="366.7544">)</text><polygon fill="#A80036" points="47,457.4844,37,461.4844,47,465.4844,43,461.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41" x2="242" y1="461.4844" y2="461.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="53" y="395.8872">convexusSwapCallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="227" y="395.8872">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="61" y="411.02">amount0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="61" y="426.1528">amount1,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="61" y="441.2856">recipient</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="53" y="456.4185">)</text><polygon fill="#A80036" points="613,562.2813,623,566.2813,613,570.2813,617,566.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="36" x2="619" y1="566.2813" y2="566.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="43" y="485.5513">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="111" y="485.5513">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="51" y="500.6841">ConvexusPool,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="51" y="515.8169">amount0, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="59" y="530.9497">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="51" y="546.0825">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="43" y="561.2153">)</text><polygon fill="#A80036" points="254,667.0781,244,671.0781,254,675.0781,250,671.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="248" x2="624" y1="671.0781" y2="671.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="260" y="590.3481">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="370" y="590.3481">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="268" y="605.481">Callee,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="268" y="620.6138">amount0, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="276" y="635.7466">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="268" y="650.8794">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="260" y="666.0122">)</text><!--MD5=[0f24102e40273c4166ec173fef152c27]
@startuml
' The Callee contract performs the swap method
Callee -> ConvexusPool : **swap** ( \n  recipient, \n  true, \n  amount0, \n  sqrtPriceLimitX96, \n  bytes(recipient) \n)

' The swapped tokens are paid back to the recipient
ConvexusPool -> Token1 : **transfer** ( \n  recipient, \n  amount1, { \n    "method": "pay" \n  } \n)

Token1 -> recipient : **tokenFallback** ( \n  ConvexusPool, \n  amount1, { \n    "method": "pay" \n  } \n)

ConvexusPool -> Callee : **convexusSwapCallback** ( \n  amount0, \n  amount1, \n  recipient \n)

' The Callee contract send the required amount0 of token0
Callee -> Token0 : **transfer** ( \n  ConvexusPool, \n  amount0, { \n    "method": "pay" \n  } \n)

Token0 -> ConvexusPool : **tokenFallback** ( \n  Callee, \n  amount0, { \n    "method": "pay" \n  } \n)
@enduml

@startuml
Callee -> ConvexusPool : **swap** ( \n  recipient, \n  true, \n  amount0, \n  sqrtPriceLimitX96, \n  bytes(recipient) \n)

ConvexusPool -> Token1 : **transfer** ( \n  recipient, \n  amount1, { \n    "method": "pay" \n  } \n)

Token1 -> recipient : **tokenFallback** ( \n  ConvexusPool, \n  amount1, { \n    "method": "pay" \n  } \n)

ConvexusPool -> Callee : **convexusSwapCallback** ( \n  amount0, \n  amount1, \n  recipient \n)

Callee -> Token0 : **transfer** ( \n  ConvexusPool, \n  amount0, { \n    "method": "pay" \n  } \n)

Token0 -> ConvexusPool : **tokenFallback** ( \n  Callee, \n  amount0, { \n    "method": "pay" \n  } \n)
@enduml

PlantUML version 1.2022.1beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>