<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="829px" preserveAspectRatio="none" style="width:1112px;height:829px;background:#FFFFFF;" version="1.1" viewBox="0 0 1112 829" width="1112px" zoomAndPan="magnify"><defs><filter height="300%" id="f8gw9wxv4wzmi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" filter="url(#f8gw9wxv4wzmi)" height="50.2656" style="stroke:#000000;stroke-width:2.0;" width="167" x="931" y="718.6094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="47" x2="47" y1="40.2969" y2="785.875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="388" x2="388" y1="40.2969" y2="785.875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="728.5" x2="728.5" y1="40.2969" y2="785.875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="876" x2="876" y1="40.2969" y2="785.875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1014" x2="1014" y1="40.2969" y2="785.875"/><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="12" y="24.9951">recipient</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="5" y="784.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="12" y="804.8701">recipient</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="352" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="359" y="24.9951">Token0</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="352" y="784.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="359" y="804.8701">Token0</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="101" x="676.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="683.5" y="24.9951">SwapRouter</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="101" x="676.5" y="784.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="683.5" y="804.8701">SwapRouter</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="136" x="806" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="813" y="24.9951">ConvexusFactory</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="136" x="806" y="784.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="813" y="804.8701">ConvexusFactory</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="956" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="963" y="24.9951">ConvexusPool</text><rect fill="#FEFECE" filter="url(#f8gw9wxv4wzmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="956" y="784.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="963" y="804.8701">ConvexusPool</text><polygon fill="#A80036" points="376,264.1563,386,268.1563,376,272.1563,380,268.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="47" x2="382" y1="268.1563" y2="268.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="54" y="66.3638">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="122" y="66.3638">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="66" y="81.4966">SwapRouter,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="66" y="96.6294">amount0, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="74" y="111.7622">"method":"exactInputSingle",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="74" y="126.895">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="82" y="142.0278">"tokenOut": token1,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="82" y="157.1606">"fee": fee,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="82" y="172.2935">"recipient": recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="82" y="187.4263">"deadline": deadline,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="82" y="202.5591">"amountOutMinimum": amountOutMinimum,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="82" y="217.6919">"sqrtPriceLimitX96": sqrtPriceLimitX96</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="70" y="232.8247">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="62" y="247.9575">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="54" y="263.0903">)</text><polygon fill="#A80036" points="717,490.0156,727,494.0156,717,498.0156,721,494.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="388" x2="723" y1="494.0156" y2="494.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="395" y="292.2231">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="505" y="292.2231">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="407" y="307.356">recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="407" y="322.4888">amount0, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="415" y="337.6216">"method":"exactInputSingle",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="415" y="352.7544">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="423" y="367.8872">"tokenOut": token1,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="423" y="383.02">"fee": fee,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="423" y="398.1528">"recipient": recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="423" y="413.2856">"deadline": deadline,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="423" y="428.4185">"amountOutMinimum": amountOutMinimum,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="423" y="443.5513">"sqrtPriceLimitX96": sqrtPriceLimitX96</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="411" y="458.6841">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="403" y="473.8169">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="395" y="488.9497">)</text><polygon fill="#A80036" points="864,579.6797,874,583.6797,864,587.6797,868,583.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729" x2="870" y1="583.6797" y2="583.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="736" y="518.0825">getPool</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="800" y="518.0825">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="744" y="533.2153">"token0": token0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="744" y="548.3481">"token1": token1,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="744" y="563.481">"fee": fee,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="736" y="578.6138">)</text><polygon fill="#A80036" points="1002.5,699.6094,1012.5,703.6094,1002.5,707.6094,1006.5,703.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729" x2="1008.5" y1="703.6094" y2="703.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="736" y="607.7466">swap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="778" y="607.7466">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="744" y="622.8794">recipient,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="744" y="638.0122">true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="744" y="653.145">amount0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="744" y="668.2778">sqrtPriceLimitX96,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="744" y="683.4106">bytes(SwapCallbackData)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="736" y="698.5435">)</text><path d="M931,718.6094 L1058,718.6094 L1058,725.6094 L1048,735.6094 L931,735.6094 L931,718.6094 " fill="#FFD700" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="50.2656" style="stroke:#000000;stroke-width:2.0;" width="167" x="931" y="718.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="946" y="731.6763">Core Layer</text><rect fill="#FBFB77" filter="url(#f8gw9wxv4wzmi)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="147" x="941" y="740.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="945" y="756.8091">Tokens Swap process</text><!--MD5=[9d164b21e98945a15b99e14e05831f7d]
@startuml
' Send the tokens to the SwapRouter contract
recipient -> Token0 : **transfer** ( \n   SwapRouter, \n   amount0, { \n     "method":"exactInputSingle", \n     "params": {\n       "tokenOut": token1, \n       "fee": fee, \n       "recipient": recipient, \n       "deadline": deadline, \n       "amountOutMinimum": amountOutMinimum, \n       "sqrtPriceLimitX96": sqrtPriceLimitX96 \n    } \n  } \n)

Token0 -> SwapRouter : **tokenFallback** ( \n   recipient, \n   amount0, { \n     "method":"exactInputSingle", \n     "params": {\n       "tokenOut": token1, \n       "fee": fee, \n       "recipient": recipient, \n       "deadline": deadline, \n       "amountOutMinimum": amountOutMinimum, \n       "sqrtPriceLimitX96": sqrtPriceLimitX96 \n    } \n  } \n)

SwapRouter -> ConvexusFactory : **getPool** ( \n  "token0": token0, \n  "token1": token1, \n  "fee": fee, \n)

' The SwapRouter contract performs the swap method
SwapRouter -> ConvexusPool : **swap** ( \n  recipient, \n  true, \n  amount0, \n  sqrtPriceLimitX96, \n  bytes(SwapCallbackData) \n)

group#Gold #LightBlue Core Layer
  rnote over ConvexusPool
    Tokens Swap process
  endrnote
end
@enduml

@startuml
recipient -> Token0 : **transfer** ( \n   SwapRouter, \n   amount0, { \n     "method":"exactInputSingle", \n     "params": {\n       "tokenOut": token1, \n       "fee": fee, \n       "recipient": recipient, \n       "deadline": deadline, \n       "amountOutMinimum": amountOutMinimum, \n       "sqrtPriceLimitX96": sqrtPriceLimitX96 \n    } \n  } \n)

Token0 -> SwapRouter : **tokenFallback** ( \n   recipient, \n   amount0, { \n     "method":"exactInputSingle", \n     "params": {\n       "tokenOut": token1, \n       "fee": fee, \n       "recipient": recipient, \n       "deadline": deadline, \n       "amountOutMinimum": amountOutMinimum, \n       "sqrtPriceLimitX96": sqrtPriceLimitX96 \n    } \n  } \n)

SwapRouter -> ConvexusFactory : **getPool** ( \n  "token0": token0, \n  "token1": token1, \n  "fee": fee, \n)

SwapRouter -> ConvexusPool : **swap** ( \n  recipient, \n  true, \n  amount0, \n  sqrtPriceLimitX96, \n  bytes(SwapCallbackData) \n)

group#Gold #LightBlue Core Layer
  rnote over ConvexusPool
    Tokens Swap process
  endrnote
end
@enduml

PlantUML version 1.2022.1beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>